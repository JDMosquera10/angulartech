/**
 * Estilos del componente Machines
 * Mantiene armonía con el dashboard usando variables y mixins compartidos
 */

@import '../../../app/shared/styles/variables';
@import '../../../app/shared/styles/mixins';

// ==============================================
// CONTENEDOR PRINCIPAL
// ==============================================

:host {
  display: block;
  height: 100%;
  width: 100%;
  background-color: $color-background;
}

// ==============================================
// HEADER DE PÁGINA
// ==============================================

.mat-header-strong {
  @include page-header;
  @include fade-in;
}

.size-title {
  font-size: $font-size-display;
  font-weight: $font-weight-bold;
  color: $color-text-primary;
  margin: 0;
  padding: $spacing-md;
}

// ==============================================
// CONTENEDOR DE CONTENIDO
// ==============================================

.content-cards {
  @include content-container;
  @include fade-in;
  animation-delay: 0.2s;
}

// ==============================================
// CARD PRINCIPAL
// ==============================================

.chart-card {
  @include card-base;
  width: 100% !important;
  max-width: 1200px;
  margin: 0 auto;
  
  mat-card-header {
    padding: 0;
    margin-bottom: $spacing-lg;
  }
  
  mat-card-content {
    padding: 0;
  }
}

// ==============================================
// HEADER DE CARD CON BÚSQUEDA Y BOTÓN
// ==============================================

.card-header-strong {
  @include flex-between;
  width: 100%;
  gap: $spacing-md;
  margin-bottom: $spacing-lg;
  
  // Campo de búsqueda personalizado
  .custom-input {
    flex: 1;
    max-width: 400px;
    
    .mat-mdc-form-field-wrapper {
      background-color: $input-bg !important;
      border-radius: $border-radius-sm;
    }
    
    input {
      color: $color-text-primary;
      
      &::placeholder {
        color: $color-text-hint;
      }
    }
    
    mat-icon {
      color: $color-text-secondary;
    }
  }
  
  // Botón agregar
  .button-agregar {
    @include button-primary;
    
    &:hover {
      transform: translateY(-2px);
    }
  }
}

// ==============================================
// TABLA DE DATOS
// ==============================================

.mat-elevation-z8 {
  @include table-container;
  @include custom-scrollbar;
  max-height: 600px;
  background-color: transparent;
  box-shadow: none;
  
  table {
    @include table-base;
  }
  
  // Columnas específicas
  .mat-column-acciones {
    width: 60px;
    text-align: center;
  }
  
  .mat-column-model {
    font-weight: $font-weight-medium;
  }
  
  .mat-column-status {
    .operational {
      color: $color-success;
    }
    
    .maintenance {
      color: $color-warning;
    }
    
    .out_of_service {
      color: $color-danger;
    }
  }
}

// ==============================================
// MENÚ DE ACCIONES
// ==============================================

mat-menu {
  .mat-mdc-menu-content {
    background-color: $color-surface-elevated;
    
    button {
      color: $color-text-primary;
      
      &:hover {
        background-color: rgba($color-primary, 0.1);
      }
      
      mat-icon {
        color: $color-primary;
        margin-right: $spacing-sm;
      }
    }
  }
}

// ==============================================
// PAGINADOR
// ==============================================

mat-paginator {
  background-color: $color-surface;
  color: $color-text-primary;
  border-top: $border-width-thin solid $color-border;
  margin-top: $spacing-md;
  border-radius: 0 0 $border-radius-md $border-radius-md;
}

// ==============================================
// ESTILOS DEL MODAL
// ==============================================

::ng-deep .custom-dialog-container {
  @include card-base;
  border-radius: $border-radius-xl;
  padding: $spacing-lg;
  max-width: 600px;
  box-shadow: $shadow-primary;
  
  .mat-mdc-dialog-title {
    color: $color-text-primary;
    font-size: $font-size-xl;
    font-weight: $font-weight-medium;
    margin-bottom: $spacing-lg;
  }
  
  .mat-mdc-dialog-content {
    color: $color-text-secondary;
    
    // Campos del formulario en el modal
    .mat-mdc-form-field {
      margin-bottom: $spacing-md;
      
      .mat-mdc-text-field-wrapper {
        background-color: $input-bg;
      }
    }
  }
  
  .mat-mdc-dialog-actions {
    padding-top: $spacing-lg;
    gap: $spacing-md;
    
    button {
      @include button-base;
      
      &.mat-primary {
        @include button-primary;
      }
      
      &.mat-mdc-dialog-close {
        @include button-secondary;
      }
    }
  }
}

// ==============================================
// RESPONSIVE
// ==============================================

@include responsive('md') {
  .card-header-strong {
    flex-direction: row;
    
    .custom-input {
      max-width: 400px;
    }
  }
}

@include responsive('sm') {
  .card-header-strong {
    flex-direction: column;
    align-items: stretch;
    
    .custom-input {
      max-width: 100%;
    }
    
    .button-agregar {
      width: 100%;
      justify-content: center;
    }
  }
  
  .mat-elevation-z8 {
    max-height: 400px;
  }
  
  .size-title {
    font-size: $font-size-xxl;
  }
}

// ==============================================
// ANIMACIONES
// ==============================================

// Animación para las filas de la tabla
.mat-mdc-row {
  @include fade-in;
  
  @for $i from 1 through 20 {
    &:nth-child(#{$i}) {
      animation-delay: #{$i * 0.05}s;
    }
  }
}

// Hover effect en iconos de acción
.mat-mdc-icon-button {
  transition: $transition-fast;
  
  &:hover {
    color: $color-primary;
    transform: scale(1.1);
  }
}
